{
  "$defs": {
    "ActionInput": {
      "additionalProperties": false,
      "properties": {
        "type": {
          "anyOf": [
            {
              "const": "int",
              "type": "string"
            },
            {
              "const": "float",
              "type": "string"
            },
            {
              "const": "bool",
              "type": "string"
            },
            {
              "const": "str",
              "type": "string"
            }
          ],
          "default": "str",
          "title": "Type"
        },
        "descr": {
          "title": "Descr",
          "type": "string"
        },
        "default": {
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "type": "number"
            },
            {
              "type": "string"
            },
            {
              "type": "boolean"
            }
          ],
          "title": "Default"
        }
      },
      "title": "ActionInput",
      "type": "object"
    },
    "BatchAction": {
      "additionalProperties": false,
      "properties": {
        "name": {
          "title": "Name",
          "type": "string"
        },
        "author": {
          "title": "Author",
          "type": "string"
        },
        "descr": {
          "title": "Descr",
          "type": "string"
        },
        "inputs": {
          "additionalProperties": {
            "$ref": "#/$defs/ActionInput"
          },
          "title": "Inputs",
          "type": "object"
        },
        "outputs": {
          "additionalProperties": {
            "$ref": "#/$defs/ActionInput"
          },
          "title": "Outputs",
          "type": "object"
        },
        "kind": {
          "const": "batch",
          "title": "Kind",
          "type": "string"
        },
        "cache": {
          "$ref": "#/$defs/Cache"
        },
        "images": {
          "additionalProperties": {
            "$ref": "#/$defs/Image"
          },
          "title": "Images",
          "type": "object"
        },
        "tasks": {
          "items": {
            "$ref": "#/$defs/Task"
          },
          "title": "Tasks",
          "type": "array"
        }
      },
      "required": [
        "kind",
        "tasks"
      ],
      "title": "BatchAction",
      "type": "object"
    },
    "Cache": {
      "additionalProperties": false,
      "properties": {
        "strategy": {
          "$ref": "#/$defs/CacheStrategy"
        },
        "life_span": {
          "title": "Life Span",
          "type": "string"
        }
      },
      "required": [
        "strategy"
      ],
      "title": "Cache",
      "type": "object"
    },
    "CacheStrategy": {
      "enum": [
        "none",
        "default",
        "inherit"
      ],
      "title": "CacheStrategy",
      "type": "string"
    },
    "Image": {
      "additionalProperties": false,
      "properties": {
        "ref": {
          "title": "Ref",
          "type": "string"
        },
        "context": {
          "title": "Context",
          "type": "string"
        },
        "dockerfile": {
          "title": "Dockerfile",
          "type": "string"
        },
        "build_args": {
          "items": {
            "type": "string"
          },
          "title": "Build Args",
          "type": "array"
        },
        "env": {
          "additionalProperties": {
            "type": "string"
          },
          "title": "Env",
          "type": "object"
        },
        "volumes": {
          "items": {
            "type": "string"
          },
          "title": "Volumes",
          "type": "array"
        },
        "build_preset": {
          "title": "Build Preset",
          "type": "string"
        },
        "force_rebuild": {
          "title": "Force Rebuild",
          "type": "boolean"
        },
        "extra_kaniko_args": {
          "title": "Extra Kaniko Args",
          "type": "string"
        }
      },
      "required": [
        "ref"
      ],
      "title": "Image",
      "type": "object"
    },
    "JobRestartPolicy": {
      "enum": [
        "never",
        "on-failure",
        "always"
      ],
      "title": "JobRestartPolicy",
      "type": "string"
    },
    "LiveAction": {
      "additionalProperties": false,
      "properties": {
        "name": {
          "title": "Name",
          "type": "string"
        },
        "author": {
          "title": "Author",
          "type": "string"
        },
        "descr": {
          "title": "Descr",
          "type": "string"
        },
        "inputs": {
          "additionalProperties": {
            "$ref": "#/$defs/ActionInput"
          },
          "title": "Inputs",
          "type": "object"
        },
        "outputs": {
          "additionalProperties": {
            "$ref": "#/$defs/ActionInput"
          },
          "title": "Outputs",
          "type": "object"
        },
        "kind": {
          "const": "live",
          "title": "Kind",
          "type": "string"
        },
        "job": {
          "title": "Job",
          "type": "string"
        }
      },
      "required": [
        "kind",
        "job"
      ],
      "title": "LiveAction",
      "type": "object"
    },
    "LocalAction": {
      "additionalProperties": false,
      "properties": {
        "name": {
          "title": "Name",
          "type": "string"
        },
        "author": {
          "title": "Author",
          "type": "string"
        },
        "descr": {
          "title": "Descr",
          "type": "string"
        },
        "inputs": {
          "additionalProperties": {
            "$ref": "#/$defs/ActionInput"
          },
          "title": "Inputs",
          "type": "object"
        },
        "outputs": {
          "additionalProperties": {
            "$ref": "#/$defs/ActionInput"
          },
          "title": "Outputs",
          "type": "object"
        },
        "kind": {
          "const": "local",
          "title": "Kind",
          "type": "string"
        },
        "cmd": {
          "title": "Cmd",
          "type": "string"
        },
        "bash": {
          "title": "Bash",
          "type": "string"
        },
        "python": {
          "title": "Python",
          "type": "string"
        }
      },
      "required": [
        "kind",
        "cmd",
        "bash",
        "python"
      ],
      "title": "LocalAction",
      "type": "object"
    },
    "StatefulAction": {
      "additionalProperties": false,
      "properties": {
        "name": {
          "title": "Name",
          "type": "string"
        },
        "author": {
          "title": "Author",
          "type": "string"
        },
        "descr": {
          "title": "Descr",
          "type": "string"
        },
        "inputs": {
          "additionalProperties": {
            "$ref": "#/$defs/ActionInput"
          },
          "title": "Inputs",
          "type": "object"
        },
        "outputs": {
          "additionalProperties": {
            "$ref": "#/$defs/ActionInput"
          },
          "title": "Outputs",
          "type": "object"
        },
        "kind": {
          "const": "stateful",
          "title": "Kind",
          "type": "string"
        },
        "cache": {
          "$ref": "#/$defs/Cache"
        },
        "main": {
          "title": "Main",
          "type": "string"
        },
        "post": {
          "title": "Post",
          "type": "string"
        },
        "post_if": {
          "title": "Post If",
          "type": "string"
        }
      },
      "required": [
        "kind",
        "main",
        "post",
        "post_if"
      ],
      "title": "StatefulAction",
      "type": "object"
    },
    "Strategy": {
      "additionalProperties": false,
      "properties": {
        "matrix": {
          "additionalProperties": {
            "items": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "number"
                },
                {
                  "type": "string"
                },
                {
                  "type": "boolean"
                },
                {
                  "additionalProperties": {
                    "anyOf": [
                      {
                        "type": "integer"
                      },
                      {
                        "type": "number"
                      },
                      {
                        "type": "string"
                      },
                      {
                        "type": "boolean"
                      }
                    ]
                  },
                  "type": "object"
                }
              ]
            },
            "type": "array"
          },
          "title": "Matrix",
          "type": "object"
        },
        "fail_fast": {
          "title": "Fail Fast",
          "type": "boolean"
        },
        "max_parallel": {
          "title": "Max Parallel",
          "type": "integer"
        }
      },
      "title": "Strategy",
      "type": "object"
    },
    "Task": {
      "additionalProperties": false,
      "properties": {
        "title": {
          "title": "Title",
          "type": "string"
        },
        "name": {
          "title": "Name",
          "type": "string"
        },
        "image": {
          "title": "Image",
          "type": "string"
        },
        "preset": {
          "title": "Preset",
          "type": "string"
        },
        "schedule_timeout": {
          "title": "Schedule Timeout",
          "type": "string"
        },
        "entrypoint": {
          "title": "Entrypoint",
          "type": "string"
        },
        "cmd": {
          "title": "Cmd",
          "type": "string"
        },
        "bash": {
          "title": "Bash",
          "type": "string"
        },
        "python": {
          "title": "Python",
          "type": "string"
        },
        "action": {
          "title": "Action",
          "type": "string"
        },
        "module": {
          "title": "Module",
          "type": "string"
        },
        "args": {
          "additionalProperties": {
            "type": "string"
          },
          "title": "Args",
          "type": "object"
        },
        "workdir": {
          "title": "Workdir",
          "type": "string"
        },
        "env": {
          "additionalProperties": {
            "type": "string"
          },
          "title": "Env",
          "type": "object"
        },
        "volumes": {
          "items": {
            "type": "string"
          },
          "title": "Volumes",
          "type": "array"
        },
        "tags": {
          "items": {
            "type": "string"
          },
          "title": "Tags",
          "type": "array"
        },
        "life_span": {
          "title": "Life Span",
          "type": "string"
        },
        "http_port": {
          "title": "Http Port",
          "type": "integer"
        },
        "http_auth": {
          "title": "Http Auth",
          "type": "boolean"
        },
        "pass_config": {
          "title": "Pass Config",
          "type": "boolean"
        },
        "restart": {
          "$ref": "#/$defs/JobRestartPolicy",
          "title": "Restart"
        },
        "id": {
          "title": "Id",
          "type": "string"
        },
        "needs": {
          "items": {
            "type": "string"
          },
          "title": "Needs",
          "type": "array"
        },
        "strategy": {
          "$ref": "#/$defs/Strategy"
        },
        "enable": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "string"
            }
          ],
          "title": "Enable"
        },
        "cache": {
          "$ref": "#/$defs/Cache"
        },
        "mixins": {
          "items": {
            "type": "string"
          },
          "title": "Mixins",
          "type": "array"
        }
      },
      "title": "Task",
      "type": "object"
    }
  },
  "discriminator": {
    "mapping": {
      "batch": "#/$defs/BatchAction",
      "live": "#/$defs/LiveAction",
      "local": "#/$defs/LocalAction",
      "stateful": "#/$defs/StatefulAction"
    },
    "propertyName": "kind"
  },
  "oneOf": [
    {
      "$ref": "#/$defs/LiveAction"
    },
    {
      "$ref": "#/$defs/BatchAction"
    },
    {
      "$ref": "#/$defs/StatefulAction"
    },
    {
      "$ref": "#/$defs/LocalAction"
    }
  ]
}
